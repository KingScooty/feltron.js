;(function(a){"use strict";Array.max=function(a){return Math.max.apply(Math,a)},Array.min=function(a){return Math.min.apply(Math,a)};var b={heat:function(b){var c=a.extend({txt:[{font:'12px myriad-pro-condensed, "Myriad Pro Condensed", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif',stroke:"none",fill:"#666"},{font:'12px minion-pro, Times, "Times New Roman", serif',"font-style":"italic",stroke:"none",fill:"#666","text-anchor":"start"}],shade:["102,102,102","215,10,45"],shade1:["rgb(215,10,45)","rgb(102,102,102)"]},b);return this.each(function(){var b=[],d=[],e=[],f=[],g=a(this);a("table",g).hide(),a("tbody td",g).each(function(){b.push(parseFloat(a(this).text(),10))}),a("thead th",g).each(function(){f.push(a(this).text())}),a("tbody th",g).each(function(){e.push(a(this).text())}),a("tfoot th",g).each(function(){d.push(a(this).text())});for(var h=a(this).width(),i=a(this).height(),k=60,l=30,m=90,n=.5,o=Raphael(a(this).attr("id"),h,i),p=(h-l)/f.length,q=(h-k)/d.length,r=(i-m)/e.length,t=(a(this).css("color"),55),u=[.4,.6,.8,1,.8,.6],v=[.1,.3,.45,.85,.45,.3],w=Raphael.animation({"fill-opacity":1},1100,"<>"),w=function(a){var b=Raphael.animation({"fill-opacity":a},1800,"<>");return b},x=0,y=f.length;y>x;x++)o.text(p*(x+.4),10,f[x]).attr(c.txt[0]).attr({"fill-opacity":0}).animate(w(.7).delay(50*(x+1)));for(var x=0,y=d.length;y>x;x++)o.text(q*(x+n),i-m+20,d[x]).attr(c.txt[0]).attr({transform:"r-90",fill:c.shade1[x%2]}).attr({"text-anchor":"end","fill-opacity":0}).animate(w(1).delay(50*(x+1)));for(var x=0,y=e.length;y>x;x++)o.text(h-k,r*(x+n)+20,e[x]).attr(c.txt[1]).attr({"text-anchor":"start","fill-opacity":0}).animate(w(u[x]).delay(50*(x+1)));for(var A=0,x=0,y=e.length;y>x;x++)for(var B=0,C=d.length;C>B;B++){var D=b[A]&&Math.min(Math.round(12*Math.sqrt(b[A]/Math.PI)),t);D&&function(a,d,e,f){var g=Array.max(b),f=b[A]/g,h=f,i=.9,j=h+Math.random()*(i-h),k=Raphael.animation({r:e},200*(x+1)+200*(B+1),"bounce"),l="rgba("+c.shade[Math.round(h+Math.random()*(i-h))]+","+v[x]+")",m=o.circle(a+60+e,d+10,0).attr({stroke:"none",fill:l}).animate(k.delay(1e3)),n=o.text(a+60+e,d+10,b[A]).attr(c.txt[0]).attr({fill:"#fff"}).hide(),p=o.circle(a+60+e,d+10,b[A]+10).attr({stroke:"none",fill:"#000",opacity:0});p[0].onmouseover=function(){var a=Raphael.rgb2hsb(l);a.b=.5,8>e?m.animate({r:10,"fill-opacity":1},300,"bounce"):m.animate({fill:Raphael.hsb2rgb(a).hex,r:e+2},300,"bounce"),n.show(),e>50&&n.toFront()},p[0].onmouseout=function(){8>e?m.animate({r:e,fill:l,"fill-opacity":j},300,"bounce"):m.animate({fill:l,r:e},300,"bounce"),n.hide()}}(q*(B+n)-60-D,r*(x+n)+10,D,b[A]),A++}})},bar:function(){}};jQuery.fn.feltron=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery.feltron"),void 0):b.heat.apply(this,arguments)}})(jQuery);